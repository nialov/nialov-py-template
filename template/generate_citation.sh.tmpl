#!/bin/bash

# edited from:
# https://github.com/michaelberks/madym_cxx

# doi='10.5281/zenodo.5176080'
# echo "doi: $doi" >> CITATION.cff
git fetch
curr_date=$(date +'%Y-%m-%d')
version=$(git describe --tags --abbrev=0 | sed 's/v//g')

contents="
cff-version: 1.2.0
message: \"If you use this software, please cite it as below.\"
authors:
[ % set given_name, family_name = full_name.split(' ') % ]
- family-names: [[ family_name ]]
  given-names: [[ given_name ]]
title: [[ package ]]
version: $version
date-released: \"$curr_date\"
keywords:
  - python
  - [[ keyword ]]
url: \"https://github.com/[[ github_account ]]/[[ package|replace('_', '-') ]]\""

echo "$contents" | tail --lines=+2 > CITATION.cff
cat CITATION.cff
